{% extends "layout.html" %}
{% block content %}
<h1 class="mb-4">Admin Dashboard</h1>
<p class="lead mb-4">Welcome, {{ current_user.full_name }}!</p>

<div class="dashboard-grid">
<div class="row">
    <div class="card p-4">
        <h3 class="mb-3">Add New Faculty</h3>
        <form method="POST" action="{{ url_for('add_faculty') }}" enctype="multipart/form-data">
            <div class="form-group">
                <label for="full_name">Full Name</label>
                <input type="text" id="full_name" name="full_name" required> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" name="username" required> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" required> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="subject">Subject to Teach</label>
                <input type="text" id="subject" name="subject" placeholder="e.g., Data Structures" required> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="profile_pic">Profile Picture</label>
                <input type="file" id="profile_pic" name="profile_pic" accept="image/*" required> {# Removed class="form-control-file" #}
            </div>
            <button type="submit" class="btn btn-primary">Add Faculty</button>
        </form>
    </div>
    </div>
    <div class="card p-4">
        <h3 class="mb-3">Add New Student</h3>
        <form method="POST" action="{{ url_for('add_student') }}" enctype="multipart/form-data">
            <div class="form-group">
                <label for="student_full_name">Full Name</label>
                <input type="text" id="student_full_name" name="full_name" required> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="student_username">Username</label>
                <input type="text" id="student_username" name="username" required pattern="[a-z0-9_]+" title="Username must be in lowercase and without spaces."> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="student_password">Password</label>
                <input type="password" id="student_password" name="password" required minlength="8"> {# Removed class="form-control" #}
            </div>
            <div class="form-group">
                <label for="student_stream">Stream</label>
                <select id="student_stream" name="stream" required>
                    <option value="">Select Stream</option>
                    <option value="BCA">BCA</option>
                    <option value="BBA">BBA</option>
                    <option value="B-COM">B-COM</option>
                    <option value="BSW">BSW</option>
                    <option value="MSC-IT">MSC-IT</option>
                    <option value="BSC">BSC</option>
                    <option value="M-COM">M-COM</option>
                </select>
            </div>
            <div class="form-group">
                <label for="student_sem">Semester</label>
                <select id="student_sem" name="sem" required>
                    <option value="">Select Semester</option>
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                    <option value="7th">7th</option>
                    <option value="8th">8th</option>
                </select>
            </div>
            <div class="form-group">
                <label for="student_profile_pic">Profile Picture</label>
                <input type="file" id="student_profile_pic" name="profile_pic" accept="image/*" required> {# Removed class="form-control-file" #}
            </div>
            <button type="submit" class="btn btn-primary">Add Student</button>
        </form>
    </div>        
</div>
    <div class="card p-4">
        <h3 class="mb-3">Pending Student Registrations</h3> {# Added mb-3 #}
        {% if students %}
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Full Name</th>
                            <th>Username</th>
                            <th>Stream</th>
                            <th>Semester</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr>
                            <td>{{ student.full_name }}</td>
                            <td>{{ student.username }}</td>
                            <td>{{ student.stream }}</td>
                            <td>{{ student.sem }}</td>
                            <td>
                                <a href="{{ url_for('approve_student', student_id=student.id) }}" class="btn btn-success btn-sm">Approve</a>
                                <form action="{{ url_for('decline_student', student_id=student.id) }}" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to decline and delete this student?');">Decline</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p>No pending student registrations.</p>
        {% endif %}
    </div>
</div>
{% endblock %}